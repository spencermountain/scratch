<!DOCTYPE html>
<head>
  <style>
  body{
    font-family: 'avenir next', avenir, sans-serif;
  }
  .annotation-note-title, text.title {
    font-size: 13px;
  }
  .annotation-note-label, text.title {
    font-size: 11px;
  }
  .header {
    color:#6c7f9c;
    border-bottom:2px solid rgba(108, 127, 156, 0.7);
    display:inline;
    text-align:left;
    font-size:24px;
    margin-left:5rem;
  }
  .break{
    margin:3rem;
    margin-left:5rem;
    margin-top:5rem;
    position:relative;
  }
  svg{
    margin-left:5rem;
    display:block;
  }
  .flex{
    display:inline-flex;
    position:relative;
    width:300px;
    padding-left:10px;
    border-radius:5px;
    margin-left:10px;
    min-height:5px;
  }
  .up{
    position:absolute;
    font-size:10px;
    color:grey;
    text-align:center;
    left:15px;
    top:-25px;
  }
  .weatheryear{
    height:40px;
  }
  .past{
    opacity:0.5;
  }
  .year{
    color:grey;
    font-size:17px;
  }
  .highway{
    color:#9c896c;
    font-size:18px;
  }
  path{
    shape-rendering: geometricPrecision;
  }
  .nudge{
    margin-top:3rem;
    margin-left:8rem;
    margin-bottom:3rem;
  }
  </style>
</head>
<body style="width:100vw; height:100vh; position:relative; max-width:800px;">
  <div style="margin:15px;">
    <div style="color:indianred;">Toronto 'Year in-data' pitch:</div>
    <div style="font-size:13px;">
      <div style="color:cornflowerblue;">for the Globe and Mail</div>
      <div style="color:steelblue;">September 2018</div>
      <div style="color:steelblue;">by <a href="http://spencermounta.in" style="color:steelblue; text-decoration:none; pointer:cursor;">Spencer Kelly</a>.</div>
    </div>
  </div>
  <p class="break">
    <div class="header">Weather</div>
    <svg id="temperature" width="800" height="300" style="overflow: visible;"></svg>

    <div class="highway nudge" style="position:relative; top:10px; margin-bottom:0px;">Conditions:</div>
    <span style="position:relative; top:48px; left:400px;">
      <div class="weatheryear past"> <span class="year">2016:</span>
        <span class="flex">
          <div style="position:relative; flex:17; background:#b3c5e6"></div>
          <div style="position:relative; flex:8; background:#b3d7e6"></div>
          <div style="position:relative; flex:28; background:#e8e3e3"></div>
          <div style="position:relative; flex:48; background:#e6c2b3"></div>
        </span>
      </div>
      <div class="weatheryear past"> <span class="year">2017:</span>
        <span class="flex">
          <div style="position:relative; flex:20; background:#b3c5e6"></div>
          <div style="position:relative; flex:4; background:#b3d7e6"></div>
          <div style="position:relative; flex:22; background:#e8e3e3"></div>
          <div style="position:relative; flex:54; background:#e6c2b3"></div>
        </span>
      </div>
      <div class="weatheryear"> <span class="year">2018:</span>
        <span class="flex">
          <div style="position:relative; flex:18; background:#b3c5e6"><span class="up">Rain <br/><b>65</b></span></div>
          <div style="position:relative; flex:6; background:#b3d7e6"><span class="up" style="left:-5px;">Snow<br/><b>21</b></span></div>
          <div style="position:relative; flex:28; background:#e8e3e3"><span class="up" style="left:20px;">Cloud <br/><b>102</b></span></div>
          <div style="position:relative; flex:48; background:#e6c2b3"><span class="up" style="left:30px;">Sun <br/><b>175</b></span></div>
        </span>
      </div>
    </span>
    <p>
        <div style="position:relative; top:40px; left:400px; color:grey; font-size:12px; margin-bottom:50px; min-height:40px;">&nbsp; </div>
        <div class="highway nudge" style="position:relative; top:35px;">Day Length:</div>
        <svg id="daylight" width="800" height="100" style="overflow: visible; margin-top:40px;"></svg>
      </p>
  </p>


  <!-- Traffic graphs -->
  <p class="break">
    <div class="header" style="color:#6699cc; ">Traffic</div>
    <div class="highway nudge" >Hwy 401</div>
    <svg id="traffic401" width="800" height="150" style="overflow: visible; margin-top:40px;"></svg>
    <p></p>
    <div class="highway nudge" >DVP</div>
    <svg id="trafficDVP" width="800" height="150" style="overflow: visible;"></svg>
    <div style="position:relative; top:40px; left:400px; color:#b3c5e6; font-size:12px;">- precipitation -</div>
    <svg id="rainGraph" width="800" height="100" style="overflow: visible;"></svg>

  </p>

  <!-- Sports graphs -->
  <p class="break">
    <div class="header" style="color:#6699cc; ">Sports</div>
    <div class="highway nudge" style="margin-bottom:5px;" >Home-game Attendance:</div>
    <svg id="sportsGraph" width="800" height="300" style="overflow: visible;"></svg>

    <div class="highway nudge" style="margin-top:5rem; margin-bottom:15px;">Performance:</div>
    <div style="position:relative; left:275px; color:steelblue; font-size:16px;">- Games +/- 50% -</div>
    <svg id="performanceGraph" width="800" height="300" style="overflow: visible;"></svg>
  </p>

    <!-- Politics graphs -->
    <p class="break">
      <div class="header" style="color:#6699cc; ">Politics</div>
      <div class="highway nudge" style="margin-bottom:5px;" >Bills passed:</div>
      <div class="weatheryear" style="margin-left:250px;">
        <span class="flex">
          <div style="position:relative; flex:35; background:cornflowerblue"><span class="up">Toronto Council <br/><b>3,565</b></span></div>
          <div style="position:relative; flex:3; background:steelblue"><span class="up" style="left:-25px; width:80px;">Queens Park<br/><b>306</b></span></div>
        </span>
      </div>
      <svg id="billsGraph" width="800" height="200" style="overflow: visible;"></svg>
    </p>


<svg width="960" height="500"></svg>
<script src="./lib/d3.js"></script>
<script src="./lib/d3-annotation.js"></script>
<script src="./lib/spacetime.js"></script>
<script src="./lib.js"></script>

<script src="./weather/graph.js"></script>
<script src="./weather/data.js"></script>
<script src="./weather/annotation.js"></script>

<script src="./traffic/graph.js"></script>
<script src="./traffic/rain-graph.js"></script>
<script src="./traffic/data.js"></script>
<script src="./traffic/annotation.js"></script>
<script src="./traffic/sunlight-graph.js"></script>

<script src="./sports/data.js"></script>
<script src="./sports/perfData.js"></script>
<script src="./sports/annotations.js"></script>
<script src="./sports/graph.js"></script>
<script src="./sports/performance.js"></script>

<script src="./politics/graph.js"></script>
<script src="./politics/data.js"></script>
<script src="./politics/billNotes.js"></script>
<script defer>
window.onload = function() {
  setTimeout(()=>{
    window.weatherGraph(d3.select('#temperature'), temperatureData(), 45, -45, tempNotes)

    window.trafficGraph(d3.select('#traffic401'), trafficData(), 0.35, -0.20, hwy401Notes,'.0%')
    window.trafficGraph(d3.select('#trafficDVP'), trafficData2(), 0.35, -0.20, DVPNotes,'.0%')
    window.rainGraph(d3.select('#rainGraph'), rainData(), 0.45, 0, rainNotes,'.0%')
    window.sunlightGraph(d3.select('#daylight'), dayLengthData, 1530, -100, daylightNotes)

    window.sportsGraph(d3.select('#sportsGraph'), [], 67000, 0, sportsNotes,'')
    window.performanceGraph(d3.select('#performanceGraph'), [], 60, -60, perfNotes)

    window.billsGraph(d3.select('#billsGraph'), [], 40, 0, billNotes)
  },500)
}
</script>
</body>
